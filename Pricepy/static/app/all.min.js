var app=angular.module("myApp",["ngRoute","ngSanitize","ngCookies","ngAnimate","ngTouch","ngYoutubeEmbed"]);app.config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:"static/app/templates/home.htm",controller:"homeController"}).when("/machines/:machineId",{templateUrl:"static/app/templates/machinePage.htm",controller:"machineController",machineId:"machineId"}).when("/machines",{templateUrl:"static/app/templates/machines.htm",controller:"machinesController"}).when("/arenda",{templateUrl:"static/app/templates/arenda.htm",controller:"arendaController"}).when("/contact",{templateUrl:"static/app/templates/contact.htm",controller:"contactController"}).when("/notFound",{templateUrl:"static/app/templates/notFound.htm",controller:"notFoundController"}).otherwise("/notFound",{templateUrl:"static/app/templates/notFound.htm",controller:"notFoundController"}),t.html5Mode(!0)}]),app.controller("appController",["$scope","$location","$http","getData","dateService",function(e,t,a,i,n){e.path=t.path(),i.getContent("/api/Values","header").then(function(t){e.data={},e.data.header=t,void 0,i.getContent("/api/Values","footer").then(function(t){e.data.footer=t,void 0}),null!=e.machines&&i.getContent("/api/Values","machines").then(function(t){void 0,e.machines=t,void 0,void 0})})}]),app.controller("arendaController",["$scope","$location","getData",function(e,t,a){e.$parent.path="/arenda",a.getContent("/api/Values","arenda").then(function(t){e.data=t,e.$parent.pageTitle=t.pageTitle,e.$parent.pageDescription=t.pageDescription})}]),app.controller("contactController",["$scope","$http","getData",function(e,t,a){e.$parent.path="/contact",a.getContent("/api/Values","contacts").then(function(a){e.data=a,e.$parent.pageTitle=a.pageTitle,e.$parent.pageDescription=a.pageDescription,e.isSucceeded=!1,e.isError=!1,e.submit=function(){e.messagesForm.$invalid||t({method:"POST",url:"/api/Messages",data:e.form}).then(function(t){t.data?e.isSucceeded=!0:e.isError=!0},function(t){e.isError=!0})}})}]),app.controller("homeController",["$scope","$location","getData",function(e,t,a){void 0,e.$parent.path="/",a.getContent("/api/Values","home").then(function(t){e.data=t,e.$parent.pageTitle=t.pageTitle,e.$parent.pageDescription=t.pageDescription})}]),app.controller("machineController",["$scope","$routeParams","$location","getData","filterService","cookiesService",function(e,t,a,i,n,o){void 0,e.$parent.path="/machines",e.machineName=t.machineId,e.categories=o.getObject("categories",{CategoryB:!0,CategoryE:!0}),e.availibilityFilterValue=o.getObject("availibilityFilterValue",{useFilter:!1}),i.getContent("/api/Values","machine").then(function(t){e.data=t;var n=t.pageTitle;if(e.$parent.machines){var t=e.$parent.machines;e.machines=t,e.machine={};var o=!1;e.machines.gallery.items.map(function(t){t.isVisible=!0,t.name==e.machineName&&(e.machine=t,e.index=t.id,o=!0)}),o||a.url(e.machines.gallery.items[0].href),e.machine.priceLabel=t.gallery.priceLabel,e.machines.gallery.items[e.index-1].isVisible=!1,e.isShowSecondaryImages=e.machine.secondaryImages.length>1,e.$parent.pageTitle=e.machine.description+" "+n,e.$parent.pageDescription=e.machine.description+" "+t.gallery.priceLabel+" "+e.machine.price,e.activeImg=e.machine.secondaryImages[0]}else i.getContent("/api/Values","machines").then(function(t){e.$parent.machines=t,e.machines=t,e.machine={};var i=!1;e.machines.gallery.items.map(function(t){t.name==e.machineName&&(e.machine=t,e.index=t.id,i=!0)}),i||a.url(e.machines.gallery.items[0].href),e.machine.priceLabel=t.gallery.priceLabel,e.machines.gallery.items[e.index-1].isVisible=!1,e.isShowSecondaryImages=e.machine.secondaryImages.length>1,e.$parent.pageTitle=e.machine.description+" "+n,e.$parent.pageDescription=e.machine.description+" "+t.gallery.priceLabel+" "+e.machine.price,e.activeImg=e.machine.secondaryImages[0]})}),e.setActive=function(t){e.activeImg=t},e.setPreviousImageActive=function(){for(var t=0;t<e.machine.secondaryImages.length;t++){if(e.machine.secondaryImages[t].img.imgSrc==e.activeImg.img.imgSrc&&0!=t){e.setActive(e.machine.secondaryImages[t-1]);break}}},e.setNextImageActive=function(){for(var t=0;t<e.machine.secondaryImages.length;t++){if(e.machine.secondaryImages[t].img.imgSrc==e.activeImg.img.imgSrc&&t!=e.machine.secondaryImages.length-1){void 0,e.setActive(e.machine.secondaryImages[t+1]);break}}},e.gotoPage=function(e){a.url(e)},e.saveCategoryFilter=function(){o.saveObject("categories",e.categories)},e.saveAvailibilityFilterValue=function(){o.saveObject("availibilityFilterValue",e.availibilityFilterValue)},e.categoryFilter=n.categoryFilter,e.availibilityFilter=n.availibilityFilter}]),app.controller("machinesController",["$scope","getData","dateService","filterService","cookiesService",function(e,t,a,i,n){if(e.$parent.path="/machines",e.categories=n.getObject("categories",{CategoryB:!0,CategoryE:!0}),e.availibilityFilterValue=n.getObject("availibilityFilterValue",{useFilter:!1}),e.$parent.machines){var o=e.$parent.machines;e.data=o,e.data.gallery.items.map(function(t){t.isVisible=!0,0==t.availibility&&t.availibilityDate&&a.isExpired(t.availibilityDate)&&(t.availibility=!0,t.availibilityLabel=e.data.gallery.availibilityTrueLabel)}),e.$parent.pageTitle=o.pageTitle,e.$parent.pageDescription=o.pageDescription}else t.getContent("/api/Values","machines").then(function(t){e.$parent.machines=t,e.data=t,e.data.gallery.items.map(function(t){0==t.availibility&&t.availibilityDate&&a.isExpired(t.availibilityDate)&&(t.availibility=!0,t.availibilityLabel=e.data.gallery.availibilityTrueLabel)}),e.$parent.pageTitle=t.pageTitle,e.$parent.pageDescription=t.pageDescription});e.saveCategoryFilter=function(){n.saveObject("categories",e.categories)},e.saveAvailibilityFilterValue=function(){n.saveObject("availibilityFilterValue",e.availibilityFilterValue)},e.categoryFilter=i.categoryFilter,e.availibilityFilter=i.availibilityFilter}]),app.controller("notFoundController",["$scope","getData",function(e,t){t.getContent("/api/Values","notFound").then(function(t){e.data=t,e.$parent.pageTitle=t.pageTitle,e.$parent.pageDescription=t.pageDescription})}]),app.controller("scrollToAnchorController",["$scope","anchorSmoothScroll",function(e,t){e.gotoElement=function(e){t.scrollTo(e)}}]),app.controller("toggleMenuController",["$scope","$rootScope","$window",function(e,t,a){e.isMobile=a.innerWidth<768,e.isOpen=!e.isMobile,e.toggleMenu=function(){e.isOpen=!e.isOpen},t.$on("$routeChangeStart",function(t,i,n){e.isMobile=a.innerWidth<768,e.isOpen=!e.isMobile})}]),app.directive("matchHeight",["$timeout","$window",function(e,t){return{restrict:"A",link:function(a,i,n){a.matchHeight=function(){e(function(){for(var e=i[0].getElementsByClassName("item-img"),t=1e3,a=0;a<e.length;a++){e[a].style.height="auto";var n=e[a].height;0==n&&(n=200),n<t&&(t=n)}for(var a=0;a<e.length;a++)e[a].style.height=t+"px"},900)},a.matchHeight(),angular.element(t).bind("resize",function(){a.matchHeight()})}}}]),app.directive("setMap",["$timeout",function(e){return{restrict:"A",link:function(t,a,i){function n(){var e={lat:53.841885,lng:27.524684},t=new google.maps.Map(a[0],{zoom:14,center:e});new google.maps.Marker({position:e,map:t})}e(function(){n()},500)}}}]),app.directive("showWhen",["$window",function(e){return{restrict:"A",link:function(t,a,i){t.checkExpose=function(){var t="large"==i.showWhen?"(min-width:768px)":i.showWhen;e.matchMedia(t).matches?a.removeClass("ng-hide"):(void 0,a.addClass("ng-hide"))},t.checkExpose(),angular.element(e).bind("resize",function(){t.checkExpose()})}}}]),app.service("anchorSmoothScroll",function(){this.scrollTo=function(e){var t=function(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0}(),a=function(e){for(var t=document.getElementById(e),a=t.offsetTop,i=t;i.offsetParent&&i.offsetParent!=document.body;)i=i.offsetParent,a+=i.offsetTop;return a}(e),i=a>t?a-t:t-a;if(i<100)return void scrollTo(0,a);var n=Math.round(i/100);n>=20&&(n=20);var o=Math.round(i/25),r=a>t?t+o:t-o,l=0;if(a>t)for(var c=t;c<a;c+=o)setTimeout("window.scrollTo(0, "+r+")",l*n),r+=o,r>a&&(r=a),l++;else for(var c=t;c>a;c-=o)setTimeout("window.scrollTo(0, "+r+")",l*n),r-=o,r<a&&(r=a),l++}}),app.service("cookiesService",["$cookies",function(e){return{saveObject:function(t,a){var i=new Date;i.setHours(i.getHours()+1),e.put(t,JSON.stringify(a),{expires:i})},getObject:function(t,a){var i=e.get(t);return i?JSON.parse(i):a}}}]),app.service("dateService",function(){return{isExpired:function(e){if(e){return new Date>new Date(e)}return null}}}),app.service("filterService",["textConstantService",function(e){return{categoryFilter:function(t){return function(a){if((t.CategoryB||a.fullInfo.category!=e.categories.categoryB)&&(t.CategoryE||a.fullInfo.category!=e.categories.categoryE))return a}},availibilityFilter:function(e){return function(t){return e?t.availibility?t:void 0:t}}}}]),app.service("getData",["$http",function(e){return{getContent:function(t,a){return e({method:"Get",url:t,params:{sectionName:a}}).then(function(e){return e.data},function(e){void 0})}}}]),app.value("textConstantService",{categories:{categoryB:"Категория B",categoryE:"Категория E"},available:{trueValue:"true"}});