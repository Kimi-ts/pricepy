var app=angular.module("myApp",["ngRoute","ngSanitize","ngAnimate","ngTouch"]);app.config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:"static/app/templates/home.htm",controller:"homeController"}).when("/machines/:machineId",{templateUrl:"static/app/templates/machinePage.htm",controller:"machineController",machineId:"machineId"}).when("/machines",{templateUrl:"static/app/templates/machines.htm",controller:"machinesController"}).when("/arenda",{templateUrl:"static/app/templates/arenda.htm",controller:"arendaController"}).when("/contact",{templateUrl:"static/app/templates/contact.htm",controller:"contactController"}).when("/notFound",{templateUrl:"static/app/templates/notFound.htm",controller:"notFoundController"}).otherwise("/notFound",{templateUrl:"static/app/templates/notFound.htm",controller:"notFoundController"}),t.html5Mode(!0)}]),app.controller("appController",["$scope","$location","$http","getData",function(e,t,n,o){e.path=t.path(),o.getContent("/api/Values","header").then(function(t){e.data={},e.data.header=t,console.log(e.data),o.getContent("/api/Values","footer").then(function(t){e.data.footer=t,console.log(e.data)}),null!=e.machines&&o.getContent("/api/Values","machines").then(function(t){console.log("[asynk] app machines loaded!"),e.machines=t,console.log("machines in app:"),console.log(e.data)})})}]),app.controller("arendaController",["$scope","$location","getData",function(e,t,n){console.log("arenda controller runs"),e.$parent.path="/arenda",n.getContent("/api/Values","arenda").then(function(t){e.data=t,e.$parent.pageTitle=t.pageTitle,e.$parent.pageDescription=t.pageDescription})}]),app.controller("contactController",["$scope","$http","getData",function(e,t,n){console.log("contact controller runs"),e.$parent.path="/contact",n.getContent("/api/Values","contacts").then(function(n){e.data=n,e.$parent.pageTitle=n.pageTitle,e.$parent.pageDescription=n.pageDescription,e.isSucceeded=!1,e.isError=!1,e.submit=function(){e.messagesForm.$invalid||t({method:"POST",url:"/api/Messages",data:e.form}).then(function(t){t.data?e.isSucceeded=!0:e.isError=!0},function(t){e.isError=!0})}})}]),app.controller("homeController",["$scope","$location","getData",function(e,t,n){console.log("home controller runs"),e.$parent.path="/",n.getContent("/api/Values","home").then(function(t){e.data=t,e.$parent.pageTitle=t.pageTitle,e.$parent.pageDescription=t.pageDescription})}]),app.controller("machineController",["$scope","$routeParams","$location","getData",function(e,t,n,o){console.log("single machine controller runs"),e.$parent.path="/machines",e.index=t.machineId,o.getContent("/api/Values","machine").then(function(t){e.data=t;var n=t.pageTitle;o.getContent("/api/Values","machines").then(function(t){e.machines=t,e.machine=t.gallery.items[e.index-1],e.machines.gallery.items[e.index-1].isVisible=!1,e.isShowSecondaryImages=e.machine.secondaryImages.length>1,e.$parent.pageTitle=e.machine.name+" "+n,e.$parent.pageDescription=e.machine.name+" "+t.gallery.priceLabel+" "+e.machine.price,console.log(e.machines.gallery),e.activeImg=e.machine.secondaryImages[0]})}),e.setActive=function(t){e.activeImg=t},e.setPreviousImageActive=function(){for(var t=0;t<e.machine.secondaryImages.length;t++){if(e.machine.secondaryImages[t].img.imgSrc==e.activeImg.img.imgSrc&&0!=t){e.setActive(e.machine.secondaryImages[t-1]);break}}},e.setNextImageActive=function(){for(var t=0;t<e.machine.secondaryImages.length;t++){if(e.machine.secondaryImages[t].img.imgSrc==e.activeImg.img.imgSrc&&t!=e.machine.secondaryImages.length-1){console.log(t),e.setActive(e.machine.secondaryImages[t+1]);break}}},e.gotoPage=function(e){n.url(e)}}]),app.controller("machinesController",["$scope","getData",function(e,t){if(console.log("machines controller runs"),e.$parent.path="/machines",e.$parent.machines){console.log("not null");var n=e.$parent.machines;e.data=n,e.$parent.pageTitle=n.pageTitle,e.$parent.pageDescription=n.pageDescription}else console.log("null, get new"),t.getContent("/api/Values","machines").then(function(t){e.$parent.machines=t,e.data=t,e.$parent.pageTitle=t.pageTitle,e.$parent.pageDescription=t.pageDescription})}]),app.controller("notFoundController",["$scope","getData",function(e,t){t.getContent("/api/Values","notFound").then(function(t){e.data=t,e.$parent.pageTitle=t.pageTitle,e.$parent.pageDescription=t.pageDescription})}]),app.controller("scrollToAnchorController",["$scope","anchorSmoothScroll",function(e,t){e.gotoElement=function(e){t.scrollTo(e)}}]),app.controller("toggleMenuController",["$scope","$rootScope","$window",function(e,t,n){e.isMobile=n.innerWidth<768,e.isOpen=!e.isMobile,e.toggleMenu=function(){e.isOpen=!e.isOpen},t.$on("$routeChangeStart",function(t,o,a){e.isMobile=n.innerWidth<768,e.isOpen=!e.isMobile})}]),app.directive("matchHeight",["$timeout","$window",function(e,t){return{restrict:"A",link:function(n,o,a){n.matchHeight=function(){e(function(){for(var e=o[0].getElementsByClassName("item-img"),t=1e3,n=0;n<e.length;n++){e[n].style.height="auto";var a=e[n].height;0==a&&(a=200),a<t&&(t=a)}for(var n=0;n<e.length;n++)e[n].style.height=t+"px"},900)},n.matchHeight(),angular.element(t).bind("resize",function(){n.matchHeight()})}}}]),app.directive("setMap",["$timeout",function(e){return{restrict:"A",link:function(t,n,o){function a(){var e={lat:53.841885,lng:27.524684},t=new google.maps.Map(n[0],{zoom:14,center:e});new google.maps.Marker({position:e,map:t})}e(function(){a()},500)}}}]),app.directive("showWhen",["$window",function(e){return{restrict:"A",link:function(t,n,o){t.checkExpose=function(){var t="large"==o.showWhen?"(min-width:768px)":o.showWhen;e.matchMedia(t).matches?n.removeClass("ng-hide"):(console.log("add"),n.addClass("ng-hide"))},t.checkExpose(),angular.element(e).bind("resize",function(){t.checkExpose()})}}}]),app.service("anchorSmoothScroll",function(){this.scrollTo=function(e){var t=function(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0}(),n=function(e){for(var t=document.getElementById(e),n=t.offsetTop,o=t;o.offsetParent&&o.offsetParent!=document.body;)o=o.offsetParent,n+=o.offsetTop;return n}(e),o=n>t?n-t:t-n;if(o<100)return void scrollTo(0,n);var a=Math.round(o/100);a>=20&&(a=20);var i=Math.round(o/25),r=n>t?t+i:t-i,c=0;if(n>t)for(var l=t;l<n;l+=i)setTimeout("window.scrollTo(0, "+r+")",c*a),r+=i,r>n&&(r=n),c++;else for(var l=t;l>n;l-=i)setTimeout("window.scrollTo(0, "+r+")",c*a),r-=i,r<n&&(r=n),c++}}),app.service("getData",["$http",function(e){return{getContent:function(t,n){return e({method:"Get",url:t,params:{sectionName:n}}).then(function(e){return e.data},function(e){console.log("error")})}}}]);