var adminApp=angular.module("adminApp",["ngRoute","ngSanitize","ngCookies"]);adminApp.config(["$routeProvider",function(o){o.when("/",{templateUrl:"static/admin/templates/signin.htm",controller:"signinController"}).when("/gallery",{templateUrl:"static/admin/templates/gallery.htm",controller:"galleryController"})}]),adminApp.controller("adminController",["$scope","$location","$http","getData",function(o,e,n,l){o.path=e.path(),console.log("hello from Admin"),l.getContent("/api/Values","header").then(function(e){o.data={},o.data.header=e,console.log(o.data),l.getContent("/api/Values","footer").then(function(e){o.data.footer=e,console.log(o.data)})})}]),adminApp.controller("galleryController",["$scope","$location","$http","getData","myVars",function(o,e,n,l,t){console.log("gallery controller runs"),o.$parent.path="/gallery",o.isDataUpdated=!1,l.getContent("/api/AdminValues","adminGallery").then(function(n){console.log("in gallery controller"),console.log(n),o.data=n,l.getContent("/api/AdminValues","machines").then(function(n){console.log(n),null==n?e.path("/"):o.machines=n})}),o.clearAvailibilityTextBox=function(o){o.availibilityLabel=""},o.editFullInfo=function(e){o.activeItem=e},o.save=function(){if(console.log("save called"),!o.galleryForm.$invalid&&!o.galleryForm.$pristine||!o.fullInfoForm.$invalid&&!o.fullInfoForm.$pristine){var e=t.tokenValue;console.log("im sensing data"),o.updatedMachines=[];for(var l=0;l<o.machines.gallery.items.length;l++){var a={},i=o.machines.gallery.items[l];console.log("iiiitem:"),console.log(i),a.Name=i.name,a.IsAvailable=i.availibility,a.AvailibilityLabel=i.availibilityLabel,a.IsDiscount=i.discount,a.Price=i.price,a.FullInfo=i.fullInfo,o.updatedMachines.push(a)}console.log("short collection:"),console.log(o.updatedMachines),n({method:"POST",url:"/api/Gallery",data:o.updatedMachines,contentType:"application/x-www-form-urlencoded",headers:{"X-Token":e}}).then(function(e){console.log("finally returned:"),console.log(e),e.data?(console.log("true"),o.isDataUpdated=!0,o.isError=!1):o.isError=!0})}},o.fullInfoSave=function(){}}]),adminApp.controller("signinController",["$scope","$http","$location","$cookies","getData","myVars",function(o,e,n,l,t,a){console.log("sign in controller runs"),o.$parent.path="/sign in",o.isError=!1,t.getContent("/api/Values","signin").then(function(t){o.data=t,console.log(o.data),o.submit=function(){o.messagesForm.$invalid||e({method:"POST",url:"/api/AdminValues",data:o.form}).then(function(e){console.log(e),e.data?(console.log("true"),o.isError=!1,a.tokenValue=e.data.Value,l.put("X-Token",a.tokenValue),n.path("/gallery")):o.isError=!0},function(e){o.isError=!0,console.log("error occured on our server"),console.log(e)})}})}]),adminApp.service("getData",["$http","$cookies","myVars",function(o,e,n){return{getContent:function(l,t){var a=n.tokenValue;return console.log("token value inside GETDATA service:"),console.log(a),a||(a=e.get("X-Token")),console.log("X-token"),console.log(a),o({method:"Get",url:l,params:{sectionName:t},headers:{"X-Token":a}}).then(function(o){return o.data},function(o){console.log("error")})}}}]),adminApp.value("myVars",{tokenValue:null});